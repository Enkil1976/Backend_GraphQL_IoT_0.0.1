# GraphQL IoT Backend - Environment Configuration Template
# IMPORTANT: Generate strong, unique secrets for each environment

# Application Configuration
NODE_ENV=development
PORT=4000

# JWT Secrets (CRITICAL: Generate with: openssl rand -hex 64)
# NEVER use default values in production
JWT_SECRET=GENERATE_STRONG_64_CHAR_SECRET_HERE
ACCESS_TOKEN_SECRET=GENERATE_DIFFERENT_64_CHAR_SECRET_HERE  
REFRESH_TOKEN_SECRET=GENERATE_ANOTHER_64_CHAR_SECRET_HERE

# Database Configuration
# Use SSL in production: ?sslmode=require
PG_URI=postgresql://username:password@localhost:5432/invernadero_iot?sslmode=disable
PG_SSL=false

# Redis Configuration  
# Use TLS in production: rediss://
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_URL=redis://localhost:6379

# MQTT Configuration
# Use SSL/TLS in production: mqtts://
MQTT_BROKER_URL=mqtts://broker.emqx.io:8883
MQTT_USERNAME=your_mqtt_username
MQTT_PASSWORD=your_mqtt_password

# Security Configuration
BCRYPT_ROUNDS=12
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=900000

# CORS Configuration (specify exact domains in production)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
FRONTEND_URL=http://localhost:5173

# External APIs
WEBHOOK_URL=https://your-webhook-endpoint.com/notifications
WEBHOOK_SECRET=your_webhook_secret

# Weather API (if using external weather service)
WEATHER_API_KEY=your_weather_api_key_here
WEATHER_API_URL=https://api.openweathermap.org/data/2.5

# Logging Configuration
LOG_LEVEL=info
LOG_FILE=./logs/app.log

# Email Configuration (for notifications)
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USER=your_email@gmail.com
EMAIL_SMTP_PASS=your_app_password

# Telegram Bot (for notifications)
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
TELEGRAM_CHAT_ID=your_telegram_chat_id

# Monitoring and Health Checks
HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true

# Development Only (set to false in production)
GRAPHQL_INTROSPECTION=true
GRAPHQL_PLAYGROUND=true
DEBUG_ENABLED=true

# Security Headers (production values)
HELMET_CSP_ENABLED=true
HELMET_HSTS_ENABLED=true
HELMET_NOSNIFF_ENABLED=true

# Session Configuration
SESSION_SECRET=GENERATE_SESSION_SECRET_HERE
SESSION_MAX_AGE=3600000

# File Upload Limits
MAX_FILE_SIZE=10485760
MAX_FILES=5

# Rate Limiting per User
USER_RATE_LIMIT_MAX=1000
USER_RATE_LIMIT_WINDOW=3600000

# Authentication Rate Limiting
AUTH_RATE_LIMIT_MAX=5
AUTH_RATE_LIMIT_WINDOW=900000
AUTH_RATE_LIMIT_BLOCK=3600000

# Database Connection Pool
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_CONNECTION_TIMEOUT=2000

# Redis Connection Pool
REDIS_POOL_MIN=2
REDIS_POOL_MAX=10

# GraphQL Configuration
GRAPHQL_DEPTH_LIMIT=10
GRAPHQL_COMPLEXITY_LIMIT=1000
GRAPHQL_TIMEOUT=30000

# MQTT Configuration Details
MQTT_CLIENT_ID=mqtt_client_graphql
MQTT_QOS=0
MQTT_RETAIN=false
MQTT_CLEAN_SESSION=true
MQTT_KEEP_ALIVE=60
MQTT_RECONNECT_PERIOD=1000

# Timezone Configuration
TZ=America/Santiago
DEFAULT_TIMEZONE=America/Santiago

# Backup and Maintenance
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
MAINTENANCE_MODE=false

# Feature Flags
FEATURE_WEATHER_API=true
FEATURE_NOTIFICATIONS=true
FEATURE_RULES_ENGINE=true
FEATURE_DEVICE_CONTROL=true
FEATURE_REAL_TIME_UPDATES=true

# Performance Tuning
NODE_OPTIONS=--max-old-space-size=4096
UV_THREADPOOL_SIZE=16

# Security Scanning
SECURITY_SCAN_ENABLED=false
VULNERABILITY_CHECK_ENABLED=false

# API Versioning
API_VERSION=v1
API_PREFIX=/api/v1

# Documentation
API_DOCS_ENABLED=true
API_DOCS_PATH=/docs

# Error Reporting
ERROR_REPORTING_ENABLED=false
SENTRY_DSN=

# Analytics
ANALYTICS_ENABLED=false
ANALYTICS_KEY=

# Content Security Policy
CSP_REPORT_URI=
CSP_REPORT_ONLY=false

# Additional Security Headers
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff
REFERRER_POLICY=strict-origin-when-cross-origin

# SSL/TLS Configuration
SSL_KEY_PATH=
SSL_CERT_PATH=
SSL_CA_PATH=
FORCE_HTTPS=false

# Health Check Endpoints
HEALTH_CHECK_PATH=/health
READINESS_CHECK_PATH=/ready
LIVENESS_CHECK_PATH=/live

# Graceful Shutdown
SHUTDOWN_TIMEOUT=10000
KEEP_ALIVE_TIMEOUT=5000

# Memory and Performance Monitoring
MEMORY_LIMIT=1024
CPU_LIMIT=80
DISK_LIMIT=90

# Internationalization
DEFAULT_LANGUAGE=es
SUPPORTED_LANGUAGES=es,en

# Time Formats
TIME_FORMAT=ISO
DATE_FORMAT=YYYY-MM-DD

# Currency and Units
DEFAULT_CURRENCY=CLP
TEMPERATURE_UNIT=celsius
PRESSURE_UNIT=hPa

# Development Tools
HOT_RELOAD=true
AUTO_RESTART=true
WATCH_FILES=true